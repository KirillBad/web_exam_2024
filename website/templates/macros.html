{% macro book_form(book, styles) %}
<form method="POST" enctype="multipart/form-data">
  <div class="container d-flex flex-column align-items-stretch justify-content-center w-75">
    <div class="form-floating my-2">
      <input type="text" class="form-control" id="title" name="title" placeholder="Название книги">
      <label for="floatingInput">
        {% if book.title %}
          {{ book.title }}
        {% else %}
          Название книги
        {% endif %}
      </label>
    </div>
    <select class="form-select mb-2" multiple aria-label="Multiple select example" name="style">
      {% for style in styles %}
      <option value="{{ style.id }}"> {{ style.style_name }} </option>
      {% endfor %}
    </select>
    <textarea name="short_description"></textarea>
    <div class="form-floating mb-2">
      <input type="number" class="form-control" id="year" name="year" placeholder="Год выпуска" required min="1" max="9999">
      <label for="floatingInput">
        {% if book.year %}
          {{ book.year }}
        {% else %}
          Год выпуска
        {% endif %}
      </label>
    </div>
    <div class="form-floating mb-2">
      <input type="text" class="form-control" id="publisher" name="publisher" placeholder="Издатель">
      <label for="floatingInput">
        {% if book.publisher %}
          {{ book.publisher }}
        {% else %}
          Издатель
        {% endif %}
      </label>
    </div>
    <div class="form-floating mb-2">
      <input type="text" class="form-control" id="author" name="author" placeholder="Автор">
      <label for="floatingInput">
        {% if book.author %}
          {{ book.author }}
        {% else %}
          Автор
        {% endif %}
      </label>
    </div>
    <div class="form-floating mb-2">
      <input type="number" class="form-control" id="pages" name="pages" placeholder="Количество страниц" required min="1" max="9999">
      <label for="floatingInput">
        {% if book.pages %}
          {{ book.pages }}
        {% else %}
          Количество страниц
        {% endif %}
      </label>
    </div>
    {% if not book%}
    <div class="mb-2">
      <label for="formFile" class="form-label">Обложка книги</label>
      <input type="file" class="form-control" id="formFile" name="file">
    </div>
    {% endif %}
    <button type="submit" class="btn btn-primary my-2">Отправить</button>
  </div>
</form>
<script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css">
<script>
  const easyMDE = new EasyMDE()
  easyMDE.value("{{ book.short_description if book.short_description else 'Краткое описание' }}")
  console.log(easyMDE.value())
</script>
{% endmacro %}
